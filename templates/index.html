<!DOCTYPE html>

<html>

<head>
    <title>CCROP</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    {{ gmap.js }}
</head>

<body>

<div id = "maingmap">
    {{ gmap.html }}
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

<script>
var markers={}


function sleep(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}


function read_data(id) {
    if (id in markers) {
    $.ajax({
      url: "/read",
      type: "get",
      data: {jsdata: id},
      success: function(response) {
        $("#"+id).html(response);
      },
      error: function(xhr) {
        //Do Something to handle error
      }
    });}
    else {
        console.log("Hello");
        sleep(10000).then(() => { markers[id]=true; });        
        console.log(id + " added to dict")
    };
};

$('#maingmap').on('click', '#1718', function() {
  // DO STUFF!
    var text = "test this change"
    $.ajax({
      url: "/suggestions",
      type: "get",
      data: {jsdata: text},
      success: function(response) {
        $("#1718").html(response);
      },
      error: function(xhr) {
        //Do Something to handle error
      }
    });
});


</script>

</body>

</html>